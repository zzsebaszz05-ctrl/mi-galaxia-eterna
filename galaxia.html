<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Galaxia para ti</title>
  <style>
    html,body{margin:0;height:100%;background:#000;overflow:hidden}
    #galaxy-canvas{position:fixed;inset:0;width:100%;height:100%;display:block;touch-action:none}
    .pill{position:fixed;top:10px;left:50%;transform:translateX(-50%);padding:6px 12px;border-radius:999px;
          background:rgba(0,162,255,0.15);border:1px solid rgba(0,162,255,0.5);color:#fff;font:12px system-ui;box-shadow: 0 0 10px rgba(0,162,255,0.4);}
    .player{position:fixed;left:10px;right:10px;bottom:10px;display:flex;gap:8px;align-items:center;
             background:rgba(0,20,50,0.45);border:1px solid rgba(0,162,255,0.3);border-radius:12px;padding:8px;
             backdrop-filter:blur(6px);color:#fff;font-family:system-ui}
    .player button{padding:8px 12px;border-radius:10px;border:1px solid rgba(0,162,255,0.4);background:rgba(0,162,255,0.1);color:#fff}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
<canvas id="galaxy-canvas"></canvas>
<div class="pill">Te Amo Muchote, Mis Ojitos Brillantes Blehüíô</div>

<div class="player">
  <button id="playBtn">‚ñ∂Ô∏é</button>
  <span style="font-size:12px;opacity:.9">Blue - Yung Kai <b>blue.mp3</b> üíô</span>
  <audio id="audio" preload="none" loop>
    <source src="blue.mp3" type="audio/mpeg">
  </audio>
</div>

<canvas id="fx" style="position:fixed;inset:0;pointer-events:none;"></canvas>

<script>
(function(){
const audio = document.getElementById('audio');
const playBtn = document.getElementById('playBtn');
playBtn.onclick = async () => {
  if (audio.paused) { await audio.play(); playBtn.textContent='‚è∏Ô∏é'; } 
  else { audio.pause(); playBtn.textContent='‚ñ∂Ô∏é'; }
};

const canvas = document.getElementById('galaxy-canvas');
const renderer = new THREE.WebGLRenderer({ canvas, antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 2000);
const controls = new THREE.OrbitControls(camera, renderer.domElement);
camera.position.set(0, 25, 80);

// FONDO AZUL
function makeStarTexture() {
  const c = document.createElement('canvas'); c.width = c.height = 512;
  const g = c.getContext('2d');
  const bg = g.createRadialGradient(256,256, 10, 256,256, 256);
  bg.addColorStop(0,'#00081a'); bg.addColorStop(1,'#000000');
  g.fillStyle = bg; g.fillRect(0,0,512,512);
  for(let i=0; i<500; i++){
    g.fillStyle = "rgba(0, 162, 255, "+Math.random()+")";
    g.beginPath(); g.arc(Math.random()*512, Math.random()*512, Math.random()*1.5, 0, Math.PI*2); g.fill();
  }
  return new THREE.CanvasTexture(c);
}
scene.add(new THREE.Mesh(new THREE.SphereGeometry(700,64,64), new THREE.MeshBasicMaterial({ map:makeStarTexture(), side:THREE.BackSide })));

const galaxy = new THREE.Group(); scene.add(galaxy);
const phrases = ["Pinchecha ‚ú®", " Hermosa üíô", "Mi Bebe", "Mi Cielito üåå", "Te Amoüíô", "Mi Ni√±a", "Te Amo Infinitamente ‚ôæÔ∏è"];

function makeTextTexture(text){
  const c=document.createElement('canvas'); c.width=512; c.height=64;
  const g=c.getContext('2d');
  g.font='800 32px system-ui'; g.textAlign='center'; g.textBaseline='middle';
  g.shadowColor='#00a2ff'; g.shadowBlur=15;
  g.fillStyle='#e6f7ff'; g.fillText(text,256,32);
  return new THREE.CanvasTexture(c);
}

for(let i=0; i<150; i++){
  const spr=new THREE.Sprite(new THREE.SpriteMaterial({ map:makeTextTexture(phrases[i%phrases.length]), transparent:true, blending: THREE.AdditiveBlending }));
  const dist = Math.random() * 85; const ang = Math.random() * Math.PI * 2;
  spr.position.set(Math.cos(ang)*dist, (Math.random()-0.5)*15, Math.sin(ang)*dist);
  spr.scale.set(15, 2, 1); galaxy.add(spr);
}

// N√öCLEO Y ARO (SIN PARPADEO)
const core = new THREE.Mesh(new THREE.SphereGeometry(12, 32, 32), new THREE.MeshBasicMaterial({ color: 0x000510 }));
scene.add(core);

const photonRing = new THREE.Mesh(
  new THREE.RingGeometry(13, 15, 128), 
  new THREE.MeshBasicMaterial({ color: 0x00a2ff, transparent: true, opacity: 0.9, side: THREE.DoubleSide })
);
photonRing.rotation.x = -Math.PI / 2;
photonRing.position.y = 0.1; // SEPARACI√ìN M√çNIMA PARA EVITAR PARPADEO
scene.add(photonRing);

const haloPlane = new THREE.Mesh(
  new THREE.PlaneGeometry(250, 250), 
  new THREE.MeshBasicMaterial({ 
    map: (function(){
      const c=document.createElement('canvas'); c.width=c.height=512; const g=c.getContext('2d');
      const grd=g.createRadialGradient(256,256, 100, 256,256, 256);
      grd.addColorStop(0,'rgba(0, 162, 255, 0.5)'); grd.addColorStop(1,'rgba(0,0,0,0)');
      g.fillStyle=grd; g.fillRect(0,0,512,512); return new THREE.CanvasTexture(c);
    })(), 
    transparent: true, blending: THREE.AdditiveBlending, depthWrite: false 
  })
);
haloPlane.rotation.x = -Math.PI / 2;
haloPlane.position.y = -0.1; // SEPARACI√ìN HACIA ABAJO
scene.add(haloPlane);

function animate(){
  requestAnimationFrame(animate);
  const t = performance.now() * 0.001;
  galaxy.rotation.y = t * 0.08;
  renderer.render(scene, camera);
} animate();
})();
</script>
</body>
</html>
